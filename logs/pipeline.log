2025-11-10 16:28:53 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:28:53 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:28:53 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:28:53 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 6
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - Procesando: 60387033.jpeg
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:18 - PhotoCropPipeline - INFO -   Dimensiones: 1403x1600
2025-11-10 16:30:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 338, in _process_single_file
    face_box = self._face_to_box(faces[0])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60387033.jpeg
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - Procesando: 72836440.jpeg
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 338, in _process_single_file
    face_box = self._face_to_box(faces[0])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/72836440.jpeg
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - Procesando: 73925636.png
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Dimensiones: 458x710
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 338, in _process_single_file
    face_box = self._face_to_box(faces[0])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:19 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/73925636.png
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - Procesando: 60685876.jpeg
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Dimensiones: 728x1296
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 338, in _process_single_file
    face_box = self._face_to_box(faces[0])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60685876.jpeg
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - Procesando: 61394054.jpeg
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 342, in _process_single_file
    face_box = self._face_to_box(largest_face)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:20 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61394054.jpeg
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - Procesando: 71677631.jpeg
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:30:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:30:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:30:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:30:22 - PhotoCropPipeline - ERROR - Error inesperado: 'tuple' object has no attribute 'left'
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 338, in _process_single_file
    face_box = self._face_to_box(faces[0])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 423, in _face_to_box
    return [face.left(), face.top(), face.width(), face.height()]
            ^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'left'
2025-11-10 16:30:22 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 16:30:22 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71677631.jpeg
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - 7. RESUMEN DE PROCESAMIENTO
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - Total encontrados: 6
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - Saltados (ya procesados): 0
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - Nuevos procesados:
2025-11-10 16:30:22 - PhotoCropPipeline - INFO -   ✓ Exitosos: 0
2025-11-10 16:30:22 - PhotoCropPipeline - INFO -   ⚠️  Revisión manual: 0
2025-11-10 16:30:22 - PhotoCropPipeline - INFO -   ✗ Errores: 6
2025-11-10 16:30:22 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60387033.jpeg
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 72836440.jpeg
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 73925636.png
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60685876.jpeg
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 61394054.jpeg
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 71677631.jpeg
2025-11-10 16:30:50 - PhotoCropPipeline - INFO - No hay archivos nuevos para procesar
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 6
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - Procesando: 60387033.jpeg
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:31 - PhotoCropPipeline - INFO -   Dimensiones: 1403x1600
2025-11-10 16:32:31 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60387033.jpeg
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - Procesando: 72836440.jpeg
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/72836440.jpeg
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - Procesando: 73925636.png
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Dimensiones: 458x710
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/73925636.png
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - Procesando: 60685876.jpeg
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Dimensiones: 728x1296
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60685876.jpeg
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - Procesando: 61394054.jpeg
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:33 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:34 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 16:32:34 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 16:32:34 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61394054.jpeg
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - Procesando: 71677631.jpeg
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:32:34 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 16:32:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:32:34 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:32:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677631.jpeg
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - 7. RESUMEN DE PROCESAMIENTO
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - Total encontrados: 6
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - Saltados (ya procesados): 0
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - Nuevos procesados:
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ✓ Exitosos: 5
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ⚠️  Revisión manual: 1
2025-11-10 16:32:35 - PhotoCropPipeline - INFO -   ✗ Errores: 0
2025-11-10 16:32:35 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60387033.jpeg
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 72836440.jpeg
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 73925636.png
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60685876.jpeg
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 61394054.jpeg
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 71677631.jpeg
2025-11-10 16:33:50 - PhotoCropPipeline - INFO - No hay archivos nuevos para procesar
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60387033.jpeg
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 72836440.jpeg
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 73925636.png
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60685876.jpeg
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 61394054.jpeg
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 71677631.jpeg
2025-11-10 16:33:59 - PhotoCropPipeline - INFO - No hay archivos nuevos para procesar
2025-11-10 16:41:39 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:39 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:41:39 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:39 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 6
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - Procesando: 60387033.jpeg
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:40 - PhotoCropPipeline - INFO -   Dimensiones: 1403x1600
2025-11-10 16:41:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:41:41 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/60387033.jpeg
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - Procesando: 72836440.jpeg
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/72836440.jpeg
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - Procesando: 73925636.png
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Dimensiones: 458x710
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/73925636.png
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - Procesando: 60685876.jpeg
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Dimensiones: 728x1296
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:41 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60685876.jpeg
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - Procesando: 61394054.jpeg
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 16:41:42 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 16:41:42 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61394054.jpeg
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - Procesando: 71677631.jpeg
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:41:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:41:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677631.jpeg
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - 7. RESUMEN DE PROCESAMIENTO
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - Total encontrados: 6
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - Saltados (ya procesados): 0
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - Nuevos procesados:
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ✓ Exitosos: 4
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ⚠️  Revisión manual: 2
2025-11-10 16:41:44 - PhotoCropPipeline - INFO -   ✗ Errores: 0
2025-11-10 16:41:44 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:43:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:43:59 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:43:59 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:43:59 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 6
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - Procesando: 60387033.jpeg
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:00 - PhotoCropPipeline - INFO -   Dimensiones: 1403x1600
2025-11-10 16:44:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:00 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60387033.jpeg
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - Procesando: 72836440.jpeg
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/72836440.jpeg
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - Procesando: 73925636.png
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Dimensiones: 458x710
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/73925636.png
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - Procesando: 60685876.jpeg
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Dimensiones: 728x1296
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60685876.jpeg
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - Procesando: 61394054.jpeg
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 16:44:02 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 16:44:02 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61394054.jpeg
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - Procesando: 71677631.jpeg
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:44:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:44:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677631.jpeg
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - 7. RESUMEN DE PROCESAMIENTO
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - Total encontrados: 6
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - Saltados (ya procesados): 0
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - Nuevos procesados:
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ✓ Exitosos: 5
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ⚠️  Revisión manual: 1
2025-11-10 16:44:04 - PhotoCropPipeline - INFO -   ✗ Errores: 0
2025-11-10 16:44:04 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60387033.jpeg
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 72836440.jpeg
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 73925636.png
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60685876.jpeg
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 61394054.jpeg
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 71677631.jpeg
2025-11-10 16:45:00 - PhotoCropPipeline - INFO - No hay archivos nuevos para procesar
2025-11-10 16:57:01 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:01 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 16:57:01 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:01 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - Total de archivos encontrados: 6
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 6
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - Procesando: 60387033.jpeg
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:02 - PhotoCropPipeline - INFO -   Dimensiones: 1403x1600
2025-11-10 16:57:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60387033.jpeg
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - Procesando: 72836440.jpeg
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/72836440.jpeg
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - Procesando: 73925636.png
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Dimensiones: 458x710
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/73925636.png
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - Procesando: 60685876.jpeg
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Dimensiones: 728x1296
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60685876.jpeg
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - Procesando: 61394054.jpeg
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 16:57:04 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 16:57:04 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61394054.jpeg
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - Procesando: 71677631.jpeg
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 16:57:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 16:57:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677631.jpeg
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - 7. RESUMEN DE PROCESAMIENTO
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - Total encontrados: 6
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - Saltados (ya procesados): 0
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - Nuevos procesados:
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ✓ Exitosos: 5
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ⚠️  Revisión manual: 1
2025-11-10 16:57:06 - PhotoCropPipeline - INFO -   ✗ Errores: 0
2025-11-10 16:57:06 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - INICIO DE PROCESADOR DETERMINISTA
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - Configuración cargada desde: ./config/paths.json
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - Inicialización completada
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 2. ESCANEO DE ENTRADA
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - Total de archivos encontrados: 791
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 3. FILTRADO DE ARCHIVOS NUEVOS
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60387033.jpeg
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 60685876.jpeg
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 61394054.jpeg
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ✓ Ya procesado, saltando: 71677631.jpeg
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - Archivos nuevos a procesar: 787
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 
================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 4. PROCESAMIENTO DE ARCHIVOS NUEVOS
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ================================================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - Procesando: 61420805.jpeg
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:27 - PhotoCropPipeline - INFO -   Dimensiones: 720x909
2025-11-10 17:01:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61420805.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - Procesando: 61771420.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Dimensiones: 508x632
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61771420.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - Procesando: 61527525.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61527525.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - Procesando: 62050831.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62050831.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - Procesando: 60616406.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60616406.jpeg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - Procesando: 61335236.jpg
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Dimensiones: 1199x1600
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:29 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:01:29 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:01:29 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61335236.jpg
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - Procesando: 61547374.jpeg
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61547374.jpeg
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - Procesando: 61433641.jpeg
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Dimensiones: 3595x4235
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:29 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61433641.jpeg
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - Procesando: 71368164.jpeg
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Dimensiones: 824x1417
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:35 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/71368164.jpeg
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - Procesando: 61526097.jpeg
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Dimensiones: 1280x960
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:35 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:01:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61526097.jpeg
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - Procesando: 61754692.jpeg
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   Dimensiones: 2059x2648
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61754692.jpeg
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - Procesando: 61510927.jpeg
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   Dimensiones: 960x1600
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61510927.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - Procesando: 61931930.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Dimensiones: 294x255
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61931930.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - Procesando: 71352917.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71352917.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - Procesando: 62034723.jpeg
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Dimensiones: 768x1344
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62034723.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - Procesando: 60677015.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Dimensiones: 187x239
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60677015.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - Procesando: 63137268.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Dimensiones: 383x445
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/63137268.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - Procesando: 62054256.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Dimensiones: 1146x1366
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62054256.jpeg
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - Procesando: 60620784.png
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Dimensiones: 5100x7008
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60620784.png
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - Procesando: 61517247.jpg
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Dimensiones: 177x208
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:55 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:01:55 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:01:55 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61517247.jpg
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - Procesando: 61298651.png
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1024
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:55 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:01:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61298651.png
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - Procesando: 60319144.jpeg
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Dimensiones: 218x323
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60319144.jpeg
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - Procesando: 60088326.jpeg
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Dimensiones: 1846x2242
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:56 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60088326.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - Procesando: 60690456.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60690456.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - Procesando: 61423080.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Dimensiones: 619x908
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61423080.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - Procesando: 71352115.jpeg
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Dimensiones: 3072x4096
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:01:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:01:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71352115.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 61403116.jpg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 689x937
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:03 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61403116.jpg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 61783527.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61783527.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 60357941.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60357941.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 61754930.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61754930.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 61393168.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 179x228
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61393168.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - Procesando: 62026487.jpeg
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Dimensiones: 877x996
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62026487.jpeg
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - Procesando: 61532764.png
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   Dimensiones: 1219x1600
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61532764.png
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - Procesando: 61880927.jpeg
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Dimensiones: 567x512
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:05 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61880927.jpeg
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - Procesando: 71366934.jpeg
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71366934.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - Procesando: 61375476.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Dimensiones: 1078x1280
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375476.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - Procesando: 61365568.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61365568.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - Procesando: 61362827.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61362827.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - Procesando: 61547857.jpeg
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61547857.jpeg
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - Procesando: 61483100.png
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Dimensiones: 159x182
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61483100.png
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - Procesando: 61493749.jpeg
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Dimensiones: 437x555
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61493749.jpeg
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - Procesando: 62026324.jpeg
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Dimensiones: 1103x1600
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62026324.jpeg
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - Procesando: 61423775.jpeg
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Dimensiones: 900x1319
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61423775.jpeg
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - Procesando: 61375095.jpeg
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Dimensiones: 551x709
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375095.jpeg
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - Procesando: 60398193.png
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60398193.png
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - Procesando: 60816983.png
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60816983.png
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - Procesando: 71371221.jpeg
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Dimensiones: 453x522
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71371221.jpeg
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - Procesando: 62051954.jpeg
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Dimensiones: 1040x1393
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62051954.jpeg
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - Procesando: 61375353.jpeg
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Dimensiones: 518x692
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375353.jpeg
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - Procesando: 61431473.jpeg
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Dimensiones: 1000x1600
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:10 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:10 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61431473.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - Procesando: 61955636.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61955636.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - Procesando: 61137253.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Dimensiones: 525x750
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61137253.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - Procesando: 61766858.jpeg
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Dimensiones: 1110x1410
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:11 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:11 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61766858.jpeg
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - Procesando: 61432923.png
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61432923.png
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - Procesando: 62011086.jpg
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Dimensiones: 905x1280
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:13 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:13 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:13 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62011086.jpg
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - Procesando: 61355090.jpeg
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Dimensiones: 1643x2241
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:13 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:13 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61355090.jpeg
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - Procesando: 71668756.jpeg
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   Dimensiones: 827x1063
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71668756.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - Procesando: 61496610.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Dimensiones: 870x1029
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61496610.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - Procesando: 62024229.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62024229.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - Procesando: 62053690.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Dimensiones: 551x709
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62053690.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - Procesando: 61379757.jpeg
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Dimensiones: 787x984
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61379757.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 62011394.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 720x877
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62011394.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 61464185.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 299x394
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61464185.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 61540387.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61540387.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 62028992.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 17:02:16 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 17:02:16 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/62028992.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 62053271.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 442x567
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62053271.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 71357410.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 780x1040
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71357410.jpeg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - Procesando: 60384891.jpg
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Dimensiones: 1164x1455
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:17 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:17 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:17 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60384891.jpg
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - Procesando: 61444694.jpeg
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   Dimensiones: 1058x1260
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61444694.jpeg
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - Procesando: 61864943.jpeg
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Dimensiones: 1198x1600
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61864943.jpeg
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - Procesando: 61496275.jpeg
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Dimensiones: 2448x3264
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61496275.jpeg
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - Procesando: 61128939.jpeg
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   Dimensiones: 1013x1078
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:21 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61128939.jpeg
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - Procesando: 62010227.jpeg
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Dimensiones: 1635x1317
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:02:22 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:02:22 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/62010227.jpeg
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - Procesando: 61475581.jpg
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Dimensiones: 1142x1428
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:22 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:23 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:23 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:23 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61475581.jpg
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - Procesando: 62048934.jpeg
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   Dimensiones: 902x1600
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62048934.jpeg
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - Procesando: 61384396.jpeg
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Dimensiones: 1011x1280
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61384396.jpeg
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - Procesando: 61444566.png
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Dimensiones: 1115x1476
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61444566.png
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - Procesando: 71671462.jpeg
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Dimensiones: 1013x1280
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71671462.jpeg
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - Procesando: 61422147.jpeg
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Dimensiones: 1298x1600
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61422147.jpeg
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - Procesando: 61424791.jpeg
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   Dimensiones: 1204x1600
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61424791.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - Procesando: 61433868.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Dimensiones: 1048x1280
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61433868.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - Procesando: 61657288.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61657288.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - Procesando: 61362060.jpeg
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Dimensiones: 853x1280
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61362060.jpeg
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - Procesando: 71360766.jpeg
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Dimensiones: 794x893
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71360766.jpeg
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - Procesando: 60344209.jpeg
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60344209.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - Procesando: 62555015.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Dimensiones: 366x492
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62555015.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - Procesando: 61798609.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61798609.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - Procesando: 61450347.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Dimensiones: 391x510
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61450347.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - Procesando: 71359266.jpeg
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Dimensiones: 1500x1500
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:29 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:29 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71359266.jpeg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - Procesando: 61769882.jpg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Dimensiones: 448x597
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:30 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:30 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:30 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61769882.jpg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - Procesando: 61767675.jpeg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Dimensiones: 680x728
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61767675.jpeg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - Procesando: 71145377.jpeg
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1350
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:30 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71145377.jpeg
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - Procesando: 62017575.jpeg
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   Dimensiones: 3120x4208
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62017575.jpeg
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - Procesando: 61588607.jpeg
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   Dimensiones: 1800x2700
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61588607.jpeg
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - Procesando: 71371709.jpeg
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   Dimensiones: 1352x1808
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71371709.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - Procesando: 71193131.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71193131.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - Procesando: 61790172.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61790172.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - Procesando: 61521992.jpeg
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Dimensiones: 3264x2448
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:38 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:41 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:02:41 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:02:41 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61521992.jpeg
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - Procesando: 61771511.jpeg
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:41 - PhotoCropPipeline - INFO -   Dimensiones: 1650x1275
2025-11-10 17:02:41 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:41 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61771511.jpeg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - Procesando: 62050554.png
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62050554.png
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - Procesando: 61447652.jpg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Dimensiones: 244x333
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:42 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:42 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:42 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61447652.jpg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - Procesando: 61524491.jpeg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61524491.jpeg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - Procesando: 61942017.jpg
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Dimensiones: 1085x1438
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61942017.jpg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - Procesando: 61375375.jpg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Dimensiones: 577x742
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:43 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61375375.jpg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - Procesando: 61379235.jpeg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61379235.jpeg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - Procesando: 61530006.jpeg
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Dimensiones: 1060x1443
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530006.jpeg
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - Procesando: 61379823.jpeg
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   Dimensiones: 1393x1600
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61379823.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - Procesando: 62036295.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62036295.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - Procesando: 62193374.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Dimensiones: 899x881
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62193374.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - Procesando: 61760700.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61760700.jpeg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - Procesando: 16711062.jpg
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Dimensiones: 3000x2250
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:45 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:48 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/16711062.jpg
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - Procesando: 61425151.jpg
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Dimensiones: 1199x1599
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:48 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:48 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:48 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61425151.jpg
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - Procesando: 61788762.jpeg
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Dimensiones: 684x855
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61788762.jpeg
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - Procesando: 61469552.png
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Dimensiones: 455x574
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61469552.png
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - Procesando: 71369924.jpeg
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Dimensiones: 400x600
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71369924.jpeg
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - Procesando: 62050730.png
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Dimensiones: 648x498
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62050730.png
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - Procesando: 61299566.jpeg
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Dimensiones: 793x989
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61299566.jpeg
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - Procesando: 61495467.png
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Dimensiones: 552x585
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:49 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61495467.png
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - Procesando: 61432453.jpeg
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61432453.jpeg
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - Procesando: 62680766.png
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62680766.png
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - Procesando: 62049347.png
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Dimensiones: 970x1168
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62049347.png
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - Procesando: 71677813.jpeg
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677813.jpeg
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - Procesando: 61778929.jpeg
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Dimensiones: 240x320
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61778929.jpeg
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - Procesando: 61849740.jpeg
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Dimensiones: 505x634
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61849740.jpeg
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - Procesando: 61356438.jpg
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Dimensiones: 4000x5760
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:02:59 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:02:59 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:02:59 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61356438.jpg
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - Procesando: 62038317.jpeg
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   Dimensiones: 846x1169
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:02:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:02:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62038317.jpeg
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - Procesando: 60017286.jpeg
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Dimensiones: 900x1200
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60017286.jpeg
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - Procesando: 61331055.jpeg
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Dimensiones: 1219x1174
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:00 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61331055.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 71186681.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 635x863
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71186681.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 60721092.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60721092.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 61530686.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 787x886
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530686.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 61364143.jpg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 764x956
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:01 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:01 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61364143.jpg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 61506430.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 492x625
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61506430.jpeg
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - Procesando: 71363921.png
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:03:02 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:03:02 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/71363921.png
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - Procesando: 62050854.jpeg
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Dimensiones: 1185x1485
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62050854.jpeg
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - Procesando: 61767783.jpg
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Dimensiones: 898x1166
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61767783.jpg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - Procesando: 61529164.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Dimensiones: 377x463
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61529164.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - Procesando: 71371416.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71371416.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - Procesando: 61463944.jpg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Dimensiones: 689x950
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:03 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61463944.jpg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - Procesando: 61335203.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Dimensiones: 989x1147
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61335203.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - Procesando: 61519663.jpeg
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Dimensiones: 1260x1600
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61519663.jpeg
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - Procesando: 61375574.jpeg
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   Dimensiones: 1279x1600
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375574.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - Procesando: 60400130.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60400130.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - Procesando: 61402293.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Dimensiones: 787x984
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61402293.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - Procesando: 61369451.jpeg
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Dimensiones: 1184x1543
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61369451.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - Procesando: 61981044.jpg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Dimensiones: 326x446
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:06 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:06 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:06 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61981044.jpg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - Procesando: 61391871.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Dimensiones: 554x818
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61391871.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - Procesando: 61527595.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61527595.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - Procesando: 60760267.jpeg
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Dimensiones: 1110x1410
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:06 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:06 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60760267.jpeg
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - Procesando: 61450743.jpeg
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61450743.jpeg
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - Procesando: 62353505.jpeg
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Dimensiones: 1600x2000
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62353505.jpeg
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - Procesando: 61459159.jpeg
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61459159.jpeg
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - Procesando: 62048480.jpg
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Dimensiones: 3072x3072
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:08 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:12 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:12 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:12 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62048480.jpg
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - Procesando: 61494302.jpeg
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Dimensiones: 1362x1600
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61494302.jpeg
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - Procesando: 61596060.jpeg
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Dimensiones: 2000x4160
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61596060.jpeg
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - Procesando: 60666846.jpeg
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   Dimensiones: 1162x1731
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60666846.jpeg
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - Procesando: 71675478.jpeg
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   Dimensiones: 1009x1535
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71675478.jpeg
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - Procesando: 61511720.png
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Dimensiones: 132x169
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61511720.png
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - Procesando: 61417151.jpeg
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Dimensiones: 963x1280
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61417151.jpeg
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - Procesando: 61370572.jpeg
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Dimensiones: 1140x1440
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61370572.jpeg
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - Procesando: 61983758.jpeg
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   Dimensiones: 2764x2371
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:18 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:03:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 17:03:20 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 17:03:20 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61983758.jpeg
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - Procesando: 61386741.jpeg
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Dimensiones: 644x935
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61386741.jpeg
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - Procesando: 62048989.jpeg
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62048989.jpeg
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - Procesando: 61389810.jpeg
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   Dimensiones: 2388x3184
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:21 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61389810.jpeg
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - Procesando: 61373425.jpeg
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61373425.jpeg
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - Procesando: 61360492.jpg
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61360492.jpg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 61375420.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 518x692
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375420.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 60622511.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 866x1522
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60622511.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 61401906.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 200x245
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61401906.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 61541899.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 267x301
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61541899.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 70959258.jpg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:26 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/70959258.jpg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - Procesando: 71368007.jpeg
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Dimensiones: 1131x1351
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71368007.jpeg
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - Procesando: 61773251.jpeg
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1513
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:27 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61773251.jpeg
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - Procesando: 60719653.jpeg
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   Dimensiones: 4000x3000
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:28 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:03:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:32 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/60719653.jpeg
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - Procesando: 60286440.png
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:32 - PhotoCropPipeline - INFO -   Dimensiones: 1927x2560
2025-11-10 17:03:32 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:34 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60286440.png
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - Procesando: 61239269.jpeg
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Dimensiones: 874x1110
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61239269.jpeg
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - Procesando: 61422049.jpeg
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61422049.jpeg
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - Procesando: 61253323.jpeg
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   Dimensiones: 3072x4096
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61253323.jpeg
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - Procesando: 62038311.jpeg
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   Dimensiones: 1269x1404
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:41 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62038311.jpeg
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - Procesando: 61422274.jpeg
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Dimensiones: 978x1280
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61422274.jpeg
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - Procesando: 61474608.jpeg
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Dimensiones: 976x1347
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61474608.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - Procesando: 61272229.jpg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Dimensiones: 327x443
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:43 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:43 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:43 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61272229.jpg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - Procesando: 63201749.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Dimensiones: 720x1280
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/63201749.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - Procesando: 62048046.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Dimensiones: 1124x1216
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62048046.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - Procesando: 61462300.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Dimensiones: 180x216
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61462300.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - Procesando: 61433027.jpeg
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61433027.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - Procesando: 61545615.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61545615.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - Procesando: 61775944.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Dimensiones: 400x423
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61775944.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - Procesando: 61516610.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Dimensiones: 410x646
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61516610.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - Procesando: 61516203.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61516203.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - Procesando: 62023027.jpeg
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Dimensiones: 809x1014
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62023027.jpeg
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - Procesando: 61351878.png
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Dimensiones: 375x666
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61351878.png
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - Procesando: 62054825.jpeg
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Dimensiones: 812x1167
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62054825.jpeg
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - Procesando: 62010352.jpeg
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62010352.jpeg
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - Procesando: 61445912.jpeg
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Dimensiones: 848x1097
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61445912.jpeg
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - Procesando: 61535145.jpeg
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Dimensiones: 870x899
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:46 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61535145.jpeg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - Procesando: 61546997.jpg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:47 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:47 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:47 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61546997.jpg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - Procesando: 61390284.jpeg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1200
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:47 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61390284.jpeg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - Procesando: 61937751.jpeg
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Dimensiones: 1241x1754
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:47 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61937751.jpeg
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - Procesando: 61448014.jpeg
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   Dimensiones: 1318x1460
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:48 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61448014.jpeg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - Procesando: 61496328.jpeg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Dimensiones: 440x566
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61496328.jpeg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - Procesando: 61781109.jpeg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Dimensiones: 975x1193
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61781109.jpeg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - Procesando: 61727096.jpg
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Dimensiones: 388x472
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:50 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:50 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:50 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61727096.jpg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - Procesando: 61772566.jpeg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61772566.jpeg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - Procesando: 61355344.jpeg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Dimensiones: 1122x1281
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61355344.jpeg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - Procesando: 61392856.jpeg
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Dimensiones: 1205x1600
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61392856.jpeg
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - Procesando: 71364674.jpeg
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   Dimensiones: 2187x2811
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71364674.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - Procesando: 61362687.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Dimensiones: 422x592
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61362687.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - Procesando: 61471827.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Dimensiones: 558x684
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61471827.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - Procesando: 62026219.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Dimensiones: 324x456
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:03:53 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:03:53 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/62026219.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - Procesando: 62042970.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Dimensiones: 316x419
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62042970.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - Procesando: 61434789.jpeg
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 17:03:54 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 17:03:54 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61434789.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - Procesando: 62022414.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Dimensiones: 542x724
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62022414.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - Procesando: 61756814.jpg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Dimensiones: 260x337
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:54 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:54 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:54 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61756814.jpg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - Procesando: 61868067.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Dimensiones: 738x947
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61868067.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - Procesando: 62026488.jpeg
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Dimensiones: 434x532
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62026488.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - Procesando: 61843347.png
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Dimensiones: 668x819
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61843347.png
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - Procesando: 62017802.jpg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Dimensiones: 413x532
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:55 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:55 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:55 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62017802.jpg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - Procesando: 61773149.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Dimensiones: 226x288
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61773149.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - Procesando: 62057352.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Dimensiones: 600x826
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62057352.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - Procesando: 60436492.jpeg
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Dimensiones: 2066x3053
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60436492.jpeg
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - Procesando: 61454023.jpg
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   Dimensiones: 842x1099
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:58 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:03:58 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:03:58 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61454023.jpg
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - Procesando: 62014958.jpeg
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62014958.jpeg
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - Procesando: 61495880.jpeg
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Dimensiones: 1280x1280
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:58 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:03:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61495880.jpeg
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - Procesando: 61383175.jpeg
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   Dimensiones: 2670x3400
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:03:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:03:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61383175.jpeg
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - Procesando: 62024622.jpeg
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1599
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62024622.jpeg
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - Procesando: 61273645.jpeg
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Dimensiones: 350x450
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61273645.jpeg
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - Procesando: 61450162.jpg
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Dimensiones: 793x1079
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:03 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:03 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:04 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:04 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:04 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61450162.jpg
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - Procesando: 71367386.jpeg
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Dimensiones: 1142x1600
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71367386.jpeg
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - Procesando: 61784851.jpeg
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Dimensiones: 989x1246
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61784851.jpeg
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - Procesando: 61463577.jpeg
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Dimensiones: 173x210
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61463577.jpeg
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - Procesando: 61455065.jpeg
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Dimensiones: 3024x4032
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61455065.jpeg
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - Procesando: 62012324.jpeg
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   Dimensiones: 1599x1545
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:09 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:10 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:10 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:10 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/62012324.jpeg
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - Procesando: 61945377.jpeg
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:10 - PhotoCropPipeline - INFO -   Dimensiones: 1414x1600
2025-11-10 17:04:10 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:10 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:10 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61945377.jpeg
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - Procesando: 61475268.jpeg
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   Dimensiones: 1776x2136
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:11 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:11 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61475268.jpeg
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - Procesando: 61364140.jpeg
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   Dimensiones: 900x1600
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61364140.jpeg
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - Procesando: 60643633.jpg
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Dimensiones: 778x1158
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:13 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:13 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:13 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60643633.jpg
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - Procesando: 61876399.jpeg
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Dimensiones: 2355x2313
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:13 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:13 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61876399.jpeg
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - Procesando: 61861321.jpeg
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61861321.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - Procesando: 61237299.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Dimensiones: 518x692
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61237299.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - Procesando: 61754933.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Dimensiones: 800x1000
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61754933.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - Procesando: 60577268.jpeg
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Dimensiones: 1500x1494
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:16 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60577268.jpeg
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - Procesando: 61185748.jpeg
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   Dimensiones: 1064x1090
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:17 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61185748.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - Procesando: 61879310.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Dimensiones: 448x582
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61879310.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - Procesando: 71677002.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Dimensiones: 1014x1158
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677002.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - Procesando: 61493866.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61493866.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - Procesando: 61528642.jpeg
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Dimensiones: 1114x1600
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61528642.jpeg
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - Procesando: 61154012.jpeg
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1164
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:19 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61154012.jpeg
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - Procesando: 61374963.jpeg
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61374963.jpeg
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - Procesando: 62038141.png
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Dimensiones: 401x412
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62038141.png
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - Procesando: 60339629.png
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Dimensiones: 1407x2000
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:22 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60339629.png
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - Procesando: 61443720.jpeg
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:22 - PhotoCropPipeline - INFO -   Dimensiones: 1669x2310
2025-11-10 17:04:22 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:22 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61443720.jpeg
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - Procesando: 61516793.jpeg
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   Dimensiones: 1050x1350
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61516793.jpeg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - Procesando: 60683923.jpeg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Dimensiones: 1020x1320
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60683923.jpeg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - Procesando: 61430302.jpeg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Dimensiones: 114x153
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61430302.jpeg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - Procesando: 61515491.jpg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:24 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:24 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:24 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61515491.jpg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - Procesando: 62028192.jpg
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1062
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:24 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:04:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:25 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:25 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:25 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62028192.jpg
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - Procesando: 60329097.jpeg
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Dimensiones: 1280x1279
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60329097.jpeg
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - Procesando: 71674420.jpeg
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Dimensiones: 3472x4640
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71674420.jpeg
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - Procesando: 61377996.jpg
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   Dimensiones: 1181x1535
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61377996.jpg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - Procesando: 61463579.jpg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Dimensiones: 643x543
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:32 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61463579.jpg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - Procesando: 61517125.jpg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Dimensiones: 400x431
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:32 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61517125.jpg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - Procesando: 60385017.jpeg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Dimensiones: 518x692
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60385017.jpeg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - Procesando: 61374587.jpeg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Dimensiones: 298x348
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61374587.jpeg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - Procesando: 62555111.jpeg
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Dimensiones: 1162x1600
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62555111.jpeg
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - Procesando: 61231603.jpeg
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Dimensiones: 658x676
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61231603.jpeg
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - Procesando: 60690492.jpeg
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1622
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:33 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:34 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/60690492.jpeg
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - Procesando: 62017131.jpeg
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:34 - PhotoCropPipeline - INFO -   Dimensiones: 1284x1600
2025-11-10 17:04:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:34 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62017131.jpeg
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - Procesando: 61542047.jpg
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Dimensiones: 1920x1080
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:35 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:35 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:35 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61542047.jpg
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - Procesando: 61846978.jpeg
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Dimensiones: 900x1200
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61846978.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - Procesando: 61358572.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Dimensiones: 1080x1090
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:36 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61358572.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - Procesando: 61395336.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61395336.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - Procesando: 61425961.jpeg
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61425961.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - Procesando: 61458915.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61458915.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - Procesando: 62059690.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Dimensiones: 586x779
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62059690.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - Procesando: 61531079.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Dimensiones: 589x696
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61531079.jpeg
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - Procesando: 61428822.png
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Dimensiones: 462x570
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61428822.png
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - Procesando: 61395463.jpeg
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Dimensiones: 1247x1600
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61395463.jpeg
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - Procesando: 62019667.jpeg
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Dimensiones: 507x494
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62019667.jpeg
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - Procesando: 60697432.jpeg
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Dimensiones: 963x1280
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60697432.jpeg
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - Procesando: 62026564.jpeg
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Dimensiones: 1001x1334
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62026564.jpeg
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - Procesando: 61465796.png
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Dimensiones: 4962x7013
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61465796.png
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - Procesando: 62051602.png
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   Dimensiones: 845x781
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:53 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:04:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62051602.png
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - Procesando: 61416411.jpeg
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61416411.jpeg
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - Procesando: 61526007.jpeg
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Dimensiones: 1198x1600
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61526007.jpeg
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - Procesando: 60677047.jpg
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   Dimensiones: 2088x3712
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:58 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:04:58 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:04:58 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60677047.jpg
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - Procesando: 61391776.jpeg
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61391776.jpeg
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - Procesando: 61447441.jpeg
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Dimensiones: 2142x2592
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:04:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:04:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61447441.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - Procesando: 62051642.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Dimensiones: 543x591
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62051642.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - Procesando: 61486813.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Dimensiones: 472x531
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61486813.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - Procesando: 61537753.jpeg
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Dimensiones: 864x991
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:00 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:00 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61537753.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - Procesando: 62018716.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Dimensiones: 432x552
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:05:01 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:05:01 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/62018716.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - Procesando: 61496059.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61496059.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - Procesando: 62054651.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Dimensiones: 350x388
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62054651.jpeg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - Procesando: 61844526.jpg
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Dimensiones: 2448x3264
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:01 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:01 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:04 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:04 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:04 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61844526.jpg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - Procesando: 61502073.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Dimensiones: 910x1280
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61502073.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - Procesando: 61387959.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61387959.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - Procesando: 61414439.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Dimensiones: 689x937
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61414439.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - Procesando: 61773037.jpeg
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Dimensiones: 616x645
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:04 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61773037.jpeg
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - Procesando: 71368542.jpeg
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   Dimensiones: 2315x3000
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71368542.jpeg
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - Procesando: 61402130.jpeg
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   Dimensiones: 1142x1428
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:07 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:07 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61402130.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - Procesando: 71676177.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Dimensiones: 785x1184
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71676177.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - Procesando: 71355217.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71355217.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - Procesando: 62032727.jpeg
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Dimensiones: 1308x1600
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62032727.jpeg
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - Procesando: 61420405.jpg
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   Dimensiones: 2212x2863
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:11 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:11 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:11 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61420405.jpg
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - Procesando: 61262272.jpeg
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   Dimensiones: 900x1600
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:11 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:11 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61262272.jpeg
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - Procesando: 61471730.jpeg
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Dimensiones: 888x1184
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61471730.jpeg
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - Procesando: 71360141.jpeg
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Dimensiones: 1271x1822
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:12 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:12 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71360141.jpeg
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - Procesando: 61712909.jpeg
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   Dimensiones: 1599x1200
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:13 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:05:13 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61712909.jpeg
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - Procesando: 61366648.png
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Dimensiones: 433x577
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61366648.png
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - Procesando: 61526974.png
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Dimensiones: 285x299
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61526974.png
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - Procesando: 61783577.jpeg
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Dimensiones: 435x564
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61783577.jpeg
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - Procesando: 61377656.jpg
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Dimensiones: 1261x1600
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61377656.jpg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - Procesando: 61429760.jpeg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Dimensiones: 688x885
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61429760.jpeg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - Procesando: 61767756.jpg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Dimensiones: 1156x1465
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:15 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61767756.jpg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - Procesando: 61403100.jpeg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61403100.jpeg
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - Procesando: 61394786.png
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Dimensiones: 576x572
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:15 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61394786.png
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - Procesando: 61420806.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Dimensiones: 161x206
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61420806.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - Procesando: 62015120.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Dimensiones: 322x531
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62015120.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - Procesando: 61447425.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Dimensiones: 672x538
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61447425.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - Procesando: 61366948.jpg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Dimensiones: 286x384
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:16 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:16 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:16 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61366948.jpg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - Procesando: 61933275.jpeg
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61933275.jpeg
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - Procesando: 61493546.jpeg
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   Dimensiones: 3072x4080
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61493546.jpeg
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - Procesando: 61342811.jpeg
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Dimensiones: 223x283
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61342811.jpeg
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - Procesando: 60637869.jpeg
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Dimensiones: 1240x1755
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:21 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60637869.jpeg
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - Procesando: 61529756.jpg
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Dimensiones: 1274x1312
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:22 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:22 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:22 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61529756.jpg
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - Procesando: 71675884.jpeg
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Dimensiones: 636x811
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:22 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71675884.jpeg
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - Procesando: 61483104.jpeg
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Dimensiones: 432x417
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:23 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61483104.jpeg
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - Procesando: 62544613.jpeg
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Dimensiones: 1881x2109
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62544613.jpeg
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - Procesando: 61264974.jpeg
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   Dimensiones: 1120x1540
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61264974.jpeg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - Procesando: 61771396.jpeg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Dimensiones: 515x987
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61771396.jpeg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - Procesando: 61186938.jpg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Dimensiones: 300x340
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:25 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:25 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:25 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61186938.jpg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - Procesando: 71366863.jpeg
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Dimensiones: 1000x1152
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71366863.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - Procesando: 71676913.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Dimensiones: 300x400
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71676913.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - Procesando: 61420940.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61420940.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - Procesando: 71674612.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Rostros detectados: 2
2025-11-10 17:05:26 - PhotoCropPipeline - WARNING -   ⚠️  Detectados 2 rostros
2025-11-10 17:05:26 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/71674612.jpeg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - Procesando: 61429169.jpg
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Dimensiones: 400x600
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:27 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:27 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:27 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61429169.jpg
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - Procesando: 71191475.jpg
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   Dimensiones: 3000x3000
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:27 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:30 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:30 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:30 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71191475.jpg
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - Procesando: 61428759.jpeg
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   Dimensiones: 1249x1600
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:30 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61428759.jpeg
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - Procesando: 71370620.jpeg
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Dimensiones: 1265x1600
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71370620.jpeg
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - Procesando: 71363008.jpg
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Dimensiones: 928x1184
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:32 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:32 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:32 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71363008.jpg
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - Procesando: 71192340.jpeg
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   Dimensiones: 1740x2198
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:32 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:32 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71192340.jpeg
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - Procesando: 61444672.jpeg
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   Dimensiones: 1080x1534
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:33 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61444672.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - Procesando: 62112093.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Dimensiones: 700x972
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62112093.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - Procesando: 61544798.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Dimensiones: 736x680
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61544798.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - Procesando: 61498231.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Dimensiones: 439x484
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61498231.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - Procesando: 61509871.jpeg
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Dimensiones: 1508x2112
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:34 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:34 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61509871.jpeg
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - Procesando: 60719437.jpeg
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   Dimensiones: 1007x1280
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60719437.jpeg
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - Procesando: 61362808.jpeg
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61362808.jpeg
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - Procesando: 71356955.jpg
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Dimensiones: 1497x1600
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:36 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:37 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:37 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:37 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71356955.jpg
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - Procesando: 61087605.jpeg
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   Dimensiones: 1500x1508
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:37 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61087605.jpeg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - Procesando: 61471570.jpeg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Dimensiones: 437x555
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61471570.jpeg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - Procesando: 61363825.jpg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:38 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:38 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:38 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61363825.jpg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - Procesando: 61421458.jpeg
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Dimensiones: 1175x1556
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61421458.jpeg
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - Procesando: 61445741.jpeg
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   Dimensiones: 918x1301
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61445741.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - Procesando: 61843075.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61843075.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - Procesando: 60630215.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Dimensiones: 826x1062
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60630215.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - Procesando: 62059197.jpeg
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Dimensiones: 966x1450
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62059197.jpeg
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - Procesando: 61518101.jpeg
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Dimensiones: 902x1180
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61518101.jpeg
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - Procesando: 62571826.jpg
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Dimensiones: 1000x1000
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:41 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:41 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:42 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:42 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:42 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62571826.jpg
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - Procesando: 62817257.jpeg
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   Dimensiones: 1500x1432
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:42 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62817257.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - Procesando: 61485172.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Dimensiones: 694x842
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61485172.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - Procesando: 62026325.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Dimensiones: 820x1144
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62026325.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - Procesando: 61357478.jpeg
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Dimensiones: 1240x1753
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:43 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:43 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61357478.jpeg
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - Procesando: 61421488.jpeg
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61421488.jpeg
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - Procesando: 62049685.jpg
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:44 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:44 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:45 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:45 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:45 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62049685.jpg
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - Procesando: 61530887.jpeg
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530887.jpeg
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - Procesando: 61484762.jpg
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Dimensiones: 1123x1060
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:45 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:45 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:46 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61484762.jpg
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - Procesando: 61373969.jpeg
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Dimensiones: 1080x1531
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61373969.jpeg
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - Procesando: 71370766.png
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71370766.png
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - Procesando: 61362747.jpeg
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   Dimensiones: 1320x990
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:47 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:05:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:48 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61362747.jpeg
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - Procesando: 70594708.jpeg
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/70594708.jpeg
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - Procesando: 61771158.jpeg
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Dimensiones: 1391x1600
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61771158.jpeg
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - Procesando: 61433170.jpeg
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   Dimensiones: 1991x2251
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:49 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:49 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61433170.jpeg
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - Procesando: 61436416.jpeg
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Dimensiones: 832x1219
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61436416.jpeg
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - Procesando: 61613348.jpeg
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1491
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:51 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:52 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61613348.jpeg
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - Procesando: 61522053.jpg
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Dimensiones: 800x900
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:52 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:52 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:52 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61522053.jpg
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - Procesando: 61419947.jpeg
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Dimensiones: 2304x3456
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:52 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:52 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61419947.jpeg
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - Procesando: 63079561.jpeg
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   Dimensiones: 1176x1600
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:55 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:55 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/63079561.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - Procesando: 61462342.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61462342.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - Procesando: 61368898.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Dimensiones: 760x898
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61368898.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - Procesando: 61516652.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61516652.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - Procesando: 61458406.jpeg
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Dimensiones: 1448x1600
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:56 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:05:56 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61458406.jpeg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - Procesando: 61550013.jpeg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61550013.jpeg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - Procesando: 61424116.jpeg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61424116.jpeg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - Procesando: 61444676.jpg
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Dimensiones: 567x724
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:58 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:05:58 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:05:58 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61444676.jpg
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - Procesando: 61545030.jpeg
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Dimensiones: 1280x1600
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61545030.jpeg
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - Procesando: 61302222.jpeg
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Dimensiones: 1280x1015
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:58 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:05:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:59 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61302222.jpeg
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - Procesando: 61534957.jpeg
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61534957.jpeg
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - Procesando: 60634833.jpeg
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Dimensiones: 2451x2867
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:05:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:05:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60634833.jpeg
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - Procesando: 61530734.jpeg
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   Dimensiones: 2324x2970
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:02 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:02 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530734.jpeg
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - Procesando: 61369468.jpeg
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   Dimensiones: 3060x4080
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61369468.jpeg
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - Procesando: 62302178.jpeg
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Dimensiones: 1050x1350
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62302178.jpeg
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - Procesando: 61450806.jpeg
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Dimensiones: 1130x1459
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61450806.jpeg
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - Procesando: 62721522.jpeg
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   Dimensiones: 3120x4208
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:10 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:10 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62721522.jpeg
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - Procesando: 61445857.jpeg
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Dimensiones: 1140x1440
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61445857.jpeg
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - Procesando: 62042879.jpeg
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Dimensiones: 1244x1600
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:15 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:15 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62042879.jpeg
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - Procesando: 60100182.jpeg
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:16 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:16 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60100182.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - Procesando: 71365686.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Dimensiones: 598x740
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71365686.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - Procesando: 61530315.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Dimensiones: 548x611
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530315.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - Procesando: 62010433.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Dimensiones: 435x588
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62010433.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - Procesando: 61454657.jpg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:06:17 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:06:17 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61454657.jpg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - Procesando: 60642784.jpeg
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Dimensiones: 827x1063
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:17 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:17 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60642784.jpeg
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - Procesando: 60373110.jpeg
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60373110.jpeg
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - Procesando: 003125793.jpeg
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Dimensiones: 1054x1280
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/003125793.jpeg
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - Procesando: 61360742.jpeg
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   Dimensiones: 1286x1600
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61360742.jpeg
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - Procesando: 61510371.jpeg
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Dimensiones: 1050x1350
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61510371.jpeg
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - Procesando: 61784712.jpeg
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Dimensiones: 1140x1600
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61784712.jpeg
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - Procesando: 61393491.jpeg
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61393491.jpeg
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - Procesando: 61305279.jpeg
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Dimensiones: 1406x1925
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Formato: MPO
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:21 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:21 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61305279.jpeg
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - Procesando: 62019337.jpeg
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   Dimensiones: 1152x2624
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:22 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62019337.jpeg
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - Procesando: 61487003.png
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Dimensiones: 240x307
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61487003.png
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - Procesando: 62241415.jpeg
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Dimensiones: 976x1195
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62241415.jpeg
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - Procesando: 62044189.jpeg
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Dimensiones: 1151x1600
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62044189.jpeg
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - Procesando: 61279763.jpeg
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   Dimensiones: 1800x1916
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:24 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61279763.jpeg
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - Procesando: 61528043.jpg
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   Dimensiones: 670x787
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:26 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:26 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:26 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61528043.jpg
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - Procesando: 61427325.jpeg
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Dimensiones: 1198x1600
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61427325.jpeg
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - Procesando: 61777432.jpg
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61777432.jpg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 61445628.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 344x450
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61445628.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 61523837.jpg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 444x632
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:27 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61523837.jpg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 61424048.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 347x470
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61424048.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 61724384.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 132x170
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61724384.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 62839987.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 720x925
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62839987.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - Procesando: 61516478.jpeg
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61516478.jpeg
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - Procesando: 61463787.jpg
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Dimensiones: 616x809
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:28 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:28 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:28 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61463787.jpg
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - Procesando: 61410563.png
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2338
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:28 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61410563.png
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - Procesando: 62051438.jpeg
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Dimensiones: 299x407
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62051438.jpeg
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - Procesando: 61527885.jpeg
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Dimensiones: 1026x1097
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61527885.jpeg
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - Procesando: 61619553.jpg
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Dimensiones: 1271x1800
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:30 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:30 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:31 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:31 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:31 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61619553.jpg
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - Procesando: 61375243.jpeg
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Dimensiones: 900x1600
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61375243.jpeg
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - Procesando: 62048506.jpeg
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Dimensiones: 1654x2339
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:31 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:31 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62048506.jpeg
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - Procesando: 61484693.jpeg
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   Dimensiones: 2215x3058
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:33 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:33 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61484693.jpeg
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - Procesando: 60407929.jpeg
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60407929.jpeg
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - Procesando: 61527423.jpeg
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Dimensiones: 1386x1712
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:35 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:35 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61527423.jpeg
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - Procesando: 61621114.jpeg
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Dimensiones: 578x778
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61621114.jpeg
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - Procesando: 71676212.jpeg
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Dimensiones: 1331x1686
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:36 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:36 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71676212.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - Procesando: 61463394.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Dimensiones: 236x322
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61463394.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - Procesando: 61776457.png
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Dimensiones: 242x333
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61776457.png
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - Procesando: 62461084.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Dimensiones: 324x436
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62461084.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - Procesando: 61395863.jpeg
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Dimensiones: 1173x1328
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:37 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:37 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61395863.jpeg
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - Procesando: 61607815.jpg
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:38 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:38 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:38 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61607815.jpg
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - Procesando: 61164275.jpeg
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Dimensiones: 1321x1600
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:38 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:38 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61164275.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 61464156.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61464156.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 61462449.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61462449.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 62051897.jpg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:39 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62051897.jpg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 61792243.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 843x1124
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61792243.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 61428144.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61428144.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 62608721.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 287x325
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62608721.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - Procesando: 61530438.jpeg
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Dimensiones: 354x472
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:39 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:39 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530438.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - Procesando: 61756916.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61756916.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - Procesando: 61939941.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Dimensiones: 831x750
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:40 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61939941.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - Procesando: 62017620.jpeg
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Dimensiones: 1727x2220
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:40 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:40 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62017620.jpeg
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - Procesando: 60370297.jpeg
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Dimensiones: 1130x1600
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60370297.jpeg
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - Procesando: 61409144.jpg
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Dimensiones: 2481x3508
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:42 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:42 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61409144.jpg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - Procesando: 60254277.jpeg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60254277.jpeg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - Procesando: 62022392.png
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62022392.png
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - Procesando: 71668858.jpg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Dimensiones: 944x1120
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:46 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71668858.jpg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - Procesando: 61429185.jpeg
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:46 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:46 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61429185.jpeg
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - Procesando: 61452460.png
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61452460.png
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - Procesando: 61544426.jpeg
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61544426.jpeg
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - Procesando: 61261938.jpeg
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Dimensiones: 998x1600
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:47 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:47 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61261938.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - Procesando: 61455059.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Dimensiones: 815x1087
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61455059.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - Procesando: 62049102.jpg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Dimensiones: 684x901
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:48 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:48 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:48 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/62049102.jpg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - Procesando: 60328243.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Dimensiones: 441x573
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60328243.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - Procesando: 71677559.jpeg
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Dimensiones: 1842x2256
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:48 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:48 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71677559.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - Procesando: 61424844.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Dimensiones: 459x562
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61424844.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - Procesando: 61517325.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61517325.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - Procesando: 60636451.jpeg
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Dimensiones: 1080x1338
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:50 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:50 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60636451.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - Procesando: 61479814.jpg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Dimensiones: 969x1279
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:51 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:51 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:51 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61479814.jpg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - Procesando: 60345035.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60345035.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - Procesando: 61528509.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Dimensiones: 160x175
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61528509.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - Procesando: 70739896.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Dimensiones: 472x531
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/70739896.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - Procesando: 61526825.jpeg
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Dimensiones: 1600x1177
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:51 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:06:51 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:52 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:52 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:52 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61526825.jpeg
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - Procesando: 61504181.jpeg
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:52 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1600
2025-11-10 17:06:52 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:52 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:52 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61504181.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - Procesando: 61768015.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61768015.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - Procesando: 61320565.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Dimensiones: 500x610
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61320565.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - Procesando: 62038241.jpeg
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Dimensiones: 1387x1600
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:53 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:53 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62038241.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - Procesando: 62044879.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Dimensiones: 576x576
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62044879.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - Procesando: 71672668.png
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Dimensiones: 408x523
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71672668.png
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - Procesando: 60071445.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Dimensiones: 583x740
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60071445.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - Procesando: 61546078.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Dimensiones: 472x591
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61546078.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - Procesando: 61383783.jpeg
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Dimensiones: 2422x3028
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:54 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:54 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61383783.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - Procesando: 61443373.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61443373.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - Procesando: 61777047.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Dimensiones: 239x342
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61777047.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - Procesando: 61560172.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61560172.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - Procesando: 71355907.jpeg
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Dimensiones: 1240x1755
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:57 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:57 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71355907.jpeg
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - Procesando: 61464294.jpeg
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Dimensiones: 1024x1536
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61464294.jpeg
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - Procesando: 61482824.jpeg
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Dimensiones: 1110x1410
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:58 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:58 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61482824.jpeg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - Procesando: 60532190.jpg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Dimensiones: 290x448
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:59 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:06:59 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:06:59 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60532190.jpg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - Procesando: 61566897.jpeg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Dimensiones: 425x567
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61566897.jpeg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - Procesando: 61630472.jpeg
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Dimensiones: 4080x3060
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:06:59 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:06:59 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:07:04 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:07:04 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61630472.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - Procesando: 71362809.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Dimensiones: 738x1199
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71362809.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - Procesando: 61398116.jpg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Dimensiones: 424x500
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:04 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:07:04 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:07:04 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61398116.jpg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - Procesando: 61475405.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Dimensiones: 840x1113
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61475405.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - Procesando: 61995741.jpeg
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Dimensiones: 1050x1350
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:04 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:04 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61995741.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - Procesando: 62377136.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Dimensiones: 473x532
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62377136.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - Procesando: 61415471.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Dimensiones: 704x480
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:05 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61415471.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - Procesando: 61968080.jpeg
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Dimensiones: 3408x2556
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:05 - PhotoCropPipeline - INFO -   Orientación: landscape
2025-11-10 17:07:05 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:08 - PhotoCropPipeline - INFO -   Rostros detectados: 0
2025-11-10 17:07:08 - PhotoCropPipeline - WARNING -   ⚠️  No se detectó ningún rostro
2025-11-10 17:07:08 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/61968080.jpeg
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - Procesando: 61144099.jpg
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:08 - PhotoCropPipeline - INFO -   Dimensiones: 1256x1615
2025-11-10 17:07:08 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:08 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:08 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:09 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:07:09 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:07:09 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/61144099.jpg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - Procesando: 71669957.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Dimensiones: 240x288
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71669957.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - Procesando: 61360763.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Dimensiones: 431x585
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61360763.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - Procesando: 61907789.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Dimensiones: 354x418
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61907789.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - Procesando: 71669210.jpeg
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Dimensiones: 3072x4096
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:09 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:09 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71669210.jpeg
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - Procesando: 61765292.jpeg
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Dimensiones: 123x196
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61765292.jpeg
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - Procesando: 61374274.jpeg
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Dimensiones: 3000x3607
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:14 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:14 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61374274.jpeg
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - Procesando: 61438746.png
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Dimensiones: 620x797
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61438746.png
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - Procesando: 61547545.jpeg
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Dimensiones: 591x787
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61547545.jpeg
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - Procesando: 61771569.jpeg
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Dimensiones: 900x1200
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:18 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:18 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61771569.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - Procesando: 62577983.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Dimensiones: 976x1200
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62577983.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - Procesando: 61530158.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61530158.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - Procesando: 60604196.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Dimensiones: 847x1063
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60604196.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - Procesando: 60661888.jpeg
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Dimensiones: 841x1158
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:19 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:19 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60661888.jpeg
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - Procesando: 71676296.jpg
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Dimensiones: 1110x1410
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:20 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:07:20 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:07:20 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/71676296.jpg
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - Procesando: 61421908.jpeg
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Dimensiones: 1931x2495
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:20 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:20 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61421908.jpeg
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - Procesando: 71675097.jpeg
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   Dimensiones: 1500x1500
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:22 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:22 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71675097.jpeg
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - Procesando: 61478903.jpeg
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Dimensiones: 350x455
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61478903.jpeg
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - Procesando: 71356667.jpeg
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Dimensiones: 1240x1755
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:23 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:23 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71356667.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - Procesando: 61374419.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Dimensiones: 1197x1539
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61374419.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - Procesando: 60644676.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Dimensiones: 316x341
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60644676.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - Procesando: 71354915.jpeg
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Dimensiones: 1260x1575
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:24 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:24 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71354915.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - Procesando: 60397520.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60397520.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - Procesando: 71368607.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Dimensiones: 239x233
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:25 - PhotoCropPipeline - WARNING -   ⚠️  Imagen enviada a revisión manual → manual_review/2025/admission_2025_01/71368607.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - Procesando: 71355398.jpeg
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Dimensiones: 736x1191
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:25 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:25 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/71355398.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - Procesando: 60342672.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Dimensiones: 960x1280
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60342672.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - Procesando: 60709056.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Dimensiones: 560x680
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60709056.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - Procesando: 60283833.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Dimensiones: 413x531
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/60283833.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - Procesando: 62025385.jpeg
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Dimensiones: 1080x1142
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:26 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:26 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/62025385.jpeg
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - Procesando: 61421211.jpeg
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Dimensiones: 1200x1500
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Orientación: portrait
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   ✓ Imagen procesada exitosamente → output/61421211.jpeg
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - Procesando: 60668596.jpg
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Dimensiones: 600x600
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Formato: PNG
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:27 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:27 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   Rostros detectados: 1
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   ✓ Un rostro detectado
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   ✓ Aplicando recorte...
2025-11-10 17:07:28 - PhotoCropPipeline - ERROR - Error inesperado: cannot write mode RGBA as JPEG
Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 662, in _save
    rawmode = RAWMODE[im.mode]
              ~~~~~~~^^^^^^^^^
KeyError: 'RGBA'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 370, in _process_single_file
    self._handle_single_face(img_path, img, metadata, batch_id, face_box)
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 523, in _handle_single_face
    self._process_successful_crop(img_path, img, metadata, batch_id, crop_decision["crop_box"])
  File "/home/lmayta/PycharmProjects/PhotoCrop/src/deterministic_processor.py", line 578, in _process_successful_crop
    cropped_img.save(output_path, 'JPEG', quality=95)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/Image.py", line 2571, in save
    save_handler(self, fp, filename)
  File "/home/lmayta/PycharmProjects/PhotoCrop/.venv/lib/python3.12/site-packages/PIL/JpegImagePlugin.py", line 665, in _save
    raise OSError(msg) from e
OSError: cannot write mode RGBA as JPEG
2025-11-10 17:07:28 - PhotoCropPipeline - ERROR -   ✗ Error en procesamiento
2025-11-10 17:07:28 - PhotoCropPipeline - ERROR -   ✗ Imagen con error → errors/2025/admission_2025_01/60668596.jpg
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - 
============================================================
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - Procesando: 61118224.jpeg
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - ============================================================
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - 4.1 Validación básica...
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   Dimensiones: 1496x1538
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   Formato: JPEG
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - 4.2 Creando metadato inicial...
2025-11-10 17:07:28 - PhotoCropPipeline - INFO -   Orientación: square
2025-11-10 17:07:28 - PhotoCropPipeline - INFO - 4.3 Detección facial con dlib...
